<!DOCTYPE html><html lang="pt-br"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Gest√£o Pro: Vers√£o Premium Gold</title>    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <style>        :root { --bg: #f0f2f5; --primario: #1e293b; --secundario: #fbbf24; --sucesso: #22c55e; --perigo: #ef4444; --info: #3b82f6; --cinza: #64748b; --whatsapp: #128c7e; --excel: #1d6f42; }        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: #1e293b; margin: 0; padding: 20px; }
        /* TRAVA DE SEGURAN√áA */
        #trava-seguranca { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0f172a; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .box-trava { background: #1e293b; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); width: 90%; max-width: 400px; }
        .input-chave { padding: 15px; width: 100%; border-radius: 8px; border: none; margin: 20px 0; font-size: 1.2rem; text-align: center; box-sizing: border-box; }
        
        /* BOT√ÉO FLUTUANTE DE SUPORTE */
        .btn-suporte-fixo { position: fixed; bottom: 20px; right: 20px; background: var(--whatsapp); color: white; padding: 12px 20px; border-radius: 50px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 9999; display: flex; align-items: center; gap: 8px; font-size: 0.9rem; transition: 0.3s; }
        .btn-suporte-fixo:hover { transform: scale(1.05); background: #0e7165; }

        .container { max-width: 1100px; margin: auto; display: none; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }        .relogio-box { background: white; padding: 10px 20px; border-radius: 12px; border: 2px solid var(--primario); text-align: right; }        .frase-box { font-style: italic; color: var(--cinza); margin-bottom: 20px; border-left: 4px solid var(--secundario); padding-left: 15px; font-size: 0.95rem; min-height: 40px; display: flex; align-items: center; }        .resumo-dia { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px; }        .card-lucro { padding: 20px; border-radius: 15px; text-align: center; color: white; font-weight: bold; }        .grid-forms { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }        .painel { background: white; padding: 25px; border-radius: 16px; border: 1px solid #e2e8f0; margin-bottom: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }        input, select { width: 100%; padding: 12px; border: 1.5px solid #e2e8f0; border-radius: 10px; margin-bottom: 10px; box-sizing: border-box; font-size: 1rem; }        .btn { width: 100%; padding: 14px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 5px; transition: 0.2s; font-size: 1rem; }        .btn:active { transform: scale(0.98); }        .btn-lancar { background: var(--primario); color: white; }        .btn-venda { background: var(--info); color: white; }        .btn-fechar { background: var(--sucesso); color: white; font-size: 1.1rem; }        .btn-pdf { background: var(--cinza); color: white; }        .btn-zap { background: var(--whatsapp); color: white; }        .btn-excel { background: var(--excel); color: white; }        table { width: 100%; border-collapse: collapse; margin-top: 15px; }        th, td { padding: 12px; border-bottom: 1px solid #f1f5f9; text-align: left; }        .grid-precos { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin-top: 10px; }        .preco-tag { background: #f1f5f9; border: 1px solid #e2e8f0; padding: 8px 30px 8px 10px; border-radius: 8px; font-size: 0.85rem; position: relative; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }        .btn-del { position: absolute; right: 5px; top: 50%; transform: translateY(-50%); color: var(--perigo); cursor: pointer; font-weight: bold; padding: 5px; }        .historico-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem; }        canvas { max-height: 300px; }        @media (max-width: 768px) { .grid-forms { grid-template-columns: 1fr; } }    </style></head><body>

<a href="#" id="link-suporte-fixo" class="btn-suporte-fixo" target="_blank">
    <span>üí¨ Suporte T√©cnico</span>
</a>

<div id="trava-seguranca">
    <div class="box-trava">
        <h2 id="titulo-trava">SISTEMA BLOQUEADO üîí</h2>
        <p id="msg-trava">Insira sua chave de licen√ßa anual.</p>
        <input type="text" id="chave-cliente" class="input-chave" placeholder="Chave de Acesso">
        <button class="btn" style="background:var(--sucesso); color:white" onclick="validarAcesso()">ATIVAR SISTEMA</button>
        <a href="#" id="link-suporte-trava" style="color: #94a3b8; text-decoration: none; font-size: 0.8rem; display: block; margin-top: 15px;" target="_blank">Esqueceu a chave? Falar com Suporte</a>
        <button onclick="limparParaVenda()" style="margin-top: 30px; background: none; border: none; color: #475569; font-size: 0.6rem; cursor: pointer; text-decoration: underline;">LIMPAR TUDO PARA NOVO CLIENTE</button>
    </div>
</div>

<div class="container" id="conteudo-para-pdf">    <header>        <div onclick="configurarNomeEmpresa()" style="cursor:pointer">            <h1 id="nome-empresa" style="color: var(--primario); margin: 0;">üöÄ Minha Empresa</h1>            <small id="status-licenca" style="color:var(--sucesso)">Licen√ßa Ativa</small>        </div>        <div class="relogio-box">            <span id="data-topo" style="display:block; font-size:0.8rem; color:var(--cinza)"></span>            <span id="hora-topo" style="font-size:1.4rem; font-weight:900; color:var(--primario)"></span>        </div>    </header>    <div class="frase-box" id="frase-motivadora">"A gest√£o √© a efici√™ncia em subir a escada do sucesso."</div>        <div class="resumo-dia">        <div class="card-lucro" style="background: var(--info);">Venda Bruta<div id="venda-bruta">R$ 0,00</div></div>        <div class="card-lucro" style="background: var(--perigo);">Custo do Dia<div id="custo-total">R$ 0,00</div></div>        <div class="card-lucro" style="background: var(--sucesso);">Lucro L√≠quido<div id="lucro-real">R$ 0,00</div></div>    </div>
    <div class="painel" style="border: 2px solid var(--secundario); background: #fffcf2;">        <h3>üéØ Alvo de Vendas (Break-even Point)</h3>        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">            <div>                <label style="font-size: 0.8rem; color: var(--cinza);">Custos Fixos Mensais (R$)</label>                <input type="number" id="custo-fixo-input" placeholder="Ex: 2000" oninput="salvarCustoFixo()">            </div>            <div style="text-align: center;">                <div style="font-size: 0.8rem; color: var(--cinza);">Falta vender para pagar as contas:</div>                <div id="be-resultado" style="font-size: 1.5rem; font-weight: bold; color: var(--perigo);">R$ 0,00</div>            </div>        </div>    </div>
    <div class="painel">        <h3>üìä Desempenho dos √öltimos 7 Dias</h3>        <canvas id="graficoVendas"></canvas>    </div>    <div class="grid-forms">        <div class="painel">            <h3>‚öôÔ∏è 1. Cadastro de Insumos</h3>            <input type="text" id="p-nome" placeholder="Nome do Item (Ex: Material, Farinha...)">            <div style="display: flex; gap: 5px;">                <input type="number" id="p-peso" placeholder="Qtd. Embalagem">                <select id="p-unidade" style="width: 100px;">                    <option value="kg">Kg</option><option value="g">g</option><option value="un">Un</option><option value="L">Litro</option><option value="ml">ml</option>                </select>            </div>            <input type="number" id="p-preco" placeholder="Pre√ßo Pago na Compra (R$)">            <button class="btn btn-lancar" onclick="cadastrarPreco()">Salvar no Estoque</button>            <div id="grid-precos-lista" class="grid-precos"></div>        </div>        <div class="painel">            <h3>üõí 2. Lan√ßar Consumo/Venda</h3>            <select id="u-insumo"></select>            <div style="display: flex; gap: 5px; margin-bottom: 10px;">                <input type="number" id="u-qtd" placeholder="Qtd usada" onkeydown="if(event.key==='Enter') lancarUso()">                <select id="u-unidade" style="width: 110px;">                    <option value="g">g</option><option value="kg">Kg</option><option value="un">Un</option><option value="ml">ml</option><option value="L">Litro</option>                </select>            </div>            <button class="btn btn-lancar" style="background:#ea580c" onclick="lancarUso()">Adicionar Item (Enter ‚Üµ)</button>            <hr>            <h3>üí∞ Fechamento</h3>            <input type="number" id="v-total" placeholder="Venda Total do Per√≠odo (R$)" onkeydown="if(event.key==='Enter') lancarVenda()">            <button class="btn btn-venda" onclick="lancarVenda()">üìä Calcular Lucro Atual</button>            <button class="btn btn-fechar" onclick="fecharDia()">‚úÖ Fechar e Salvar Dia</button>            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">                <button class="btn btn-pdf" onclick="gerarPDF()">üìÑ PDF</button>                <button class="btn btn-excel" onclick="exportarExcel()">üìä Excel</button>            </div>            <button class="btn btn-zap" onclick="enviarWhatsApp()">üì± Enviar via WhatsApp</button>        </div>    </div>    <div class="painel">        <h3>üìù Detalhes da Opera√ß√£o Atual</h3>        <table>            <thead><tr><th>Item</th><th>Qtd</th><th>Custo Proporcional</th><th>A√ß√£o</th></tr></thead>            <tbody id="corpo-dia"></tbody>        </table>    </div>    <div class="painel" style="background: #f8fafc;">        <h3>üìú Hist√≥rico Recente</h3>        <div id="lista-historico"></div>        <button onclick="limparHistorico()" style="margin-top:10px; color:var(--perigo); border:none; background:none; cursor:pointer; font-size:0.7rem;">Limpar Hist√≥rico Permanentemente</button>    </div></div>

<script>
    // --- ‚ö†Ô∏è CONFIGURA√á√ÉO DO VENDEDOR ‚ö†Ô∏è ---
    const SEU_WHATSAPP = "5511985788027"; // Coloque seu n√∫mero aqui (DDI + DDD + Numero)
    const CHAVE_MESTRA = "primoalfredo"; 
    const PRAZO_DIAS = 365;

    // Configurar os links de suporte automaticamente
    const urlSuporte = `https://api.whatsapp.com/send?phone=${SEU_WHATSAPP}&text=Ol√°! Preciso de suporte com o sistema Gest√£o Pro.`;
    document.getElementById('link-suporte-fixo').href = urlSuporte;
    document.getElementById('link-suporte-trava').href = urlSuporte;

    // --- SEGURAN√áA ---
    function validarAcesso() {
        if(document.getElementById('chave-cliente').value === CHAVE_MESTRA) {
            localStorage.setItem('felipe_ativa_v4', new Date().getTime());
            location.reload();
        } else { alert("Chave incorreta!"); }
    }

    function verificarLicenca() {
        const ativacao = localStorage.getItem('felipe_ativa_v4');
        if(!ativacao) {
            document.getElementById('trava-seguranca').style.display = 'flex';
        } else {
            const diasPassados = (new Date().getTime() - ativacao) / (1000 * 60 * 60 * 24);
            if(diasPassados > PRAZO_DIAS) {
                document.getElementById('trava-seguranca').style.display = 'flex';
                document.getElementById('titulo-trava').innerText = "LICEN√áA EXPIRADA";
                document.getElementById('msg-trava').innerText = "Sua licen√ßa anual venceu. Entre em contato para renovar.";
            } else {
                document.getElementById('trava-seguranca').style.display = 'none';
                document.querySelector('.container').style.display = 'block';
                document.getElementById('status-licenca').innerText = `Licen√ßa: ${Math.ceil(PRAZO_DIAS - diasPassados)} dias restantes`;
            }
        }
    }

    function limparParaVenda() {
        if(confirm("ATEN√á√ÉO: Isso apagar√° todos os dados salvos para entregar ao cliente. Continuar?")) { localStorage.clear(); location.reload(); }
    }

    // --- RESTO DO SISTEMA ---
    let precosDB = JSON.parse(localStorage.getItem('felipe_precos_v4')) || {};    let usoDia = JSON.parse(localStorage.getItem('felipe_uso_dia_v4')) || [];    let faturamentoDia = parseFloat(localStorage.getItem('felipe_faturamento_dia_v4')) || 0;    let historico = JSON.parse(localStorage.getItem('felipe_historico_v4')) || [];    let nomeEmpresa = localStorage.getItem('felipe_nome_empresa_v4') || "üöÄ Gest√£o Pro";    let custoFixoMensal = parseFloat(localStorage.getItem('felipe_custo_fixo')) || 0;    let meuGrafico = null;
    const frases = ["O sucesso √© a soma de pequenos esfor√ßos repetidos dia ap√≥s dia.","N√£o se gerencia o que n√£o se mede.","O lucro √© o resultado de uma boa gest√£o."];

    function atualizarRelogio() {        const agora = new Date();        document.getElementById('data-topo').innerText = agora.toLocaleDateString('pt-br', {weekday: 'long', day: '2-digit', month: '2-digit', year: 'numeric'}).toUpperCase();        document.getElementById('hora-topo').innerText = agora.toLocaleTimeString('pt-br');    }    setInterval(atualizarRelogio, 1000);

    function cadastrarPreco() {        const nome = document.getElementById('p-nome').value;        const peso = parseFloat(document.getElementById('p-peso').value);        const preco = parseFloat(document.getElementById('p-preco').value);        const uni = document.getElementById('p-unidade').value;        if(!nome || !peso || !preco) return;        let fator = (uni === 'kg' || uni === 'L') ? 1000 : 1;        precosDB[nome] = { precoBase: preco / (fator * peso), unidadeOriginal: uni };        localStorage.setItem('felipe_precos_v4', JSON.stringify(precosDB));        document.getElementById('p-nome').value = ""; document.getElementById('p-peso').value = ""; document.getElementById('p-preco').value = "";        renderTudo();    }

    function lancarUso() {        const nome = document.getElementById('u-insumo').value;        const qtdInput = parseFloat(document.getElementById('u-qtd').value);        const unidade = document.getElementById('u-unidade').value;        if (!nome || !qtdInput || !precosDB[nome]) return;        let qtdConvertida = (unidade === 'kg' || unidade === 'L') ? qtdInput * 1000 : qtdInput;        let custo = precosDB[nome].precoBase * qtdConvertida;        usoDia.unshift({ nome, exibicao: `${qtdInput}${unidade}`, custo });        localStorage.setItem('felipe_uso_dia_v4', JSON.stringify(usoDia));        document.getElementById('u-qtd').value = ""; renderTudo();    }

    function lancarVenda() {        faturamentoDia = parseFloat(document.getElementById('v-total').value) || 0;        localStorage.setItem('felipe_faturamento_dia_v4', faturamentoDia);        renderTudo();    }

    function fecharDia() {        let totalCusto = usoDia.reduce((acc, item) => acc + item.custo, 0);        if(faturamentoDia === 0 && totalCusto === 0) return;        historico.unshift({ data: new Date().toLocaleDateString('pt-br').substring(0,5), venda: faturamentoDia, custo: totalCusto, lucro: (faturamentoDia - totalCusto) });        if(historico.length > 30) historico.pop();        localStorage.setItem('felipe_historico_v4', JSON.stringify(historico));        usoDia = []; faturamentoDia = 0;        localStorage.setItem('felipe_uso_dia_v4', "[]"); localStorage.setItem('felipe_faturamento_dia_v4', 0);        document.getElementById('v-total').value = ""; renderTudo();    }

    function renderTudo() {        document.getElementById('nome-empresa').innerText = nomeEmpresa;        document.getElementById('custo-fixo-input').value = custoFixoMensal > 0 ? custoFixoMensal : "";        const listaTags = document.getElementById('grid-precos-lista');        const selectUso = document.getElementById('u-insumo');        listaTags.innerHTML = ""; selectUso.innerHTML = "<option value=''>Escolha o item...</option>";        for (let p in precosDB) {            listaTags.innerHTML += `<div class="preco-tag">${p}<span class="btn-del" onclick="apagarDoEstoque('${p}')">‚úï</span></div>`;            selectUso.innerHTML += `<option value="${p}">${p}</option>`;        }        const corpo = document.getElementById('corpo-dia'); corpo.innerHTML = "";        let totalCusto = 0;        usoDia.forEach((item, index) => {            totalCusto += item.custo;            corpo.innerHTML += `<tr><td>${item.nome}</td><td>${item.exibicao}</td><td>R$ ${item.custo.toFixed(2)}</td><td><button onclick="removerUso(${index})" style="border:none; background:none; cursor:pointer">‚ùå</button></td></tr>`;        });        document.getElementById('venda-bruta').innerText = `R$ ${faturamentoDia.toFixed(2)}`;        document.getElementById('custo-total').innerText = `R$ ${totalCusto.toFixed(2)}`;        document.getElementById('lucro-real').innerText = `R$ ${(faturamentoDia - totalCusto).toFixed(2)}`;        const listaHist = document.getElementById('lista-historico'); listaHist.innerHTML = "";        historico.slice(0, 7).forEach(dia => {            listaHist.innerHTML += `<div class="historico-item"><span><b>${dia.data}</b></span><span>Venda: R$ ${dia.venda.toFixed(2)}</span><span style="color:var(--sucesso)">Lucro: R$ ${dia.lucro.toFixed(2)}</span></div>`;        });        calcularBreakEven(); atualizarGrafico();    }

    function atualizarGrafico() {        const ctx = document.getElementById('graficoVendas').getContext('2d');        const labels = historico.map(d => d.data).reverse();        if (meuGrafico) meuGrafico.destroy();        meuGrafico = new Chart(ctx, {            type: 'bar',            data: {                labels: labels,                datasets: [                    { label: 'Venda Bruta', data: historico.map(d => d.venda).reverse(), backgroundColor: '#3b82f6' },                    { label: 'Lucro L√≠quido', data: historico.map(d => d.lucro).reverse(), backgroundColor: '#22c55e' }                ]            },            options: { responsive: true, maintainAspectRatio: false }        });    }

    function exportarExcel() {        let csv = "Data,Venda Bruta,Custo,Lucro\n";        historico.forEach(d => { csv += `${d.data},${d.venda.toFixed(2)},${d.custo.toFixed(2)},${d.lucro.toFixed(2)}\n`; });        const blob = new Blob([csv], { type: 'text/csv' });        const url = window.URL.createObjectURL(blob);        const a = document.createElement('a'); a.href = url; a.download = `Historico_Gestao.csv`; a.click();    }

    function salvarCustoFixo() { custoFixoMensal = parseFloat(document.getElementById('custo-fixo-input').value) || 0; localStorage.setItem('felipe_custo_fixo', custoFixoMensal); calcularBreakEven(); }
    function calcularBreakEven() {        let totalVendasMes = historico.reduce((acc, d) => acc + d.venda, 0) + faturamentoDia;        let totalCustosMes = historico.reduce((acc, d) => acc + d.custo, 0) + usoDia.reduce((acc, i) => acc + i.custo, 0);        let margemMedia = totalVendasMes > 0 ? (totalVendasMes - totalCustosMes) / totalVendasMes : 0;        let result = document.getElementById('be-resultado');        if (margemMedia > 0 && custoFixoMensal > 0) {            let falta = (custoFixoMensal / margemMedia) - totalVendasMes;            result.innerText = falta > 0 ? `R$ ${falta.toFixed(2)}` : "META ATINGIDA! üéâ";            result.style.color = falta > 0 ? "var(--perigo)" : "var(--sucesso)";        } else { result.innerText = "R$ ---"; }    }

    function configurarNomeEmpresa() { const novo = prompt("Nome da Empresa:", nomeEmpresa); if(novo) { nomeEmpresa = novo; localStorage.setItem('felipe_nome_empresa_v4', nomeEmpresa); renderTudo(); } }
    function apagarDoEstoque(item) { if(confirm(`Remover ${item}?`)) { delete precosDB[item]; localStorage.setItem('felipe_precos_v4', JSON.stringify(precosDB)); renderTudo(); } }
    function removerUso(index) { usoDia.splice(index, 1); localStorage.setItem('felipe_uso_dia_v4', JSON.stringify(usoDia)); renderTudo(); }
    function limparHistorico() { if(confirm("Apagar hist√≥rico?")) { historico = []; localStorage.setItem('felipe_historico_v4', "[]"); renderTudo(); } }
    function gerarPDF() { html2pdf().from(document.getElementById('conteudo-para-pdf')).save(`Relatorio_${nomeEmpresa}.pdf`); }
    function enviarWhatsApp() {        let totalCusto = usoDia.reduce((acc, item) => acc + item.custo, 0);        let msg = `*üìä RELAT√ìRIO: ${nomeEmpresa}*\nVenda: R$ ${faturamentoDia.toFixed(2)}\nLucro: R$ ${(faturamentoDia - totalCusto).toFixed(2)}`;        window.open(`https://api.whatsapp.com/send?phone=${SEU_WHATSAPP}&text=${encodeURIComponent(msg)}`);    }

    window.onload = () => {        verificarLicenca();        document.getElementById('frase-motivadora').innerText = `"${frases[Math.floor(Math.random() * frases.length)]}"`;        renderTudo(); atualizarRelogio();    };
</script></body></html>